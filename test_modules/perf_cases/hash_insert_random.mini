import std;
import hash_perf_utils;

n = 600_000;
table = SwissTable[i32, i32].new(i32_hasher, i32_eq);
keys = Array[i32].new(n);

for i in 0..n {
    keys.unchecked_insert(i, i);
}
shuffle_i32(keys, n, PRNG.new(777));

for i in 0..n {
    key = keys.unchecked_index(i);
    table.insert(key, key * 3 + 1);
}

sample_ok = false;
sample = table.get(12345);
if sample is i32 {
    if sample == 37036 {
        sample_ok = true;
    }
}

if sample_ok and table.size() == n {
    IO.print("ok");
} else {
    IO.print("bad");
}
