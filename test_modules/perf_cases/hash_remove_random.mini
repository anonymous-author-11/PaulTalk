import std;
import hash_perf_utils;

n = 600_000;
table = SwissTable[i32, i32].new(i32_hasher, i32_eq);
insert_keys = Array[i32].new(n);
remove_keys = Array[i32].new(n);

for i in 0..n {
    insert_keys.unchecked_insert(i, i);
    remove_keys.unchecked_insert(i, i);
}

shuffle_i32(insert_keys, n, PRNG.new(555));
shuffle_i32(remove_keys, n, PRNG.new(666));

for i in 0..n {
    key = insert_keys.unchecked_index(i);
    table.insert(key, key * 3 + 1);
}

removed_count = 0;
for i in 0..n {
    key = remove_keys.unchecked_index(i);
    removed = table.remove(key);
    if removed is i32 {
        removed_count = removed_count + 1;
    }
}

if removed_count == n and table.size() == 0 {
    IO.print("ok");
} else {
    IO.print("bad");
}
